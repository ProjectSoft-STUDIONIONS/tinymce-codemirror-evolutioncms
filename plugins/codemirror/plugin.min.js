tinymce.PluginManager.requireLangPack("codemirror"),tinymce.PluginManager.add("codemirror",function(e,o){function i(){e.focus(),e.selection.collapse(!0);let i=e.settings.codemirror?Object.assign({},e.settings.codemirror):{};i.indentOnInit=!0,i.fullscreen=!!i.fullscreen,i.path="codemirror",i.config=i.config?Object.assign(i.config,{mode:"application/x-httpd-php",lineNumbers:!0,indentUnit:4,tabSize:4,theme:"mariana"}):{mode:"application/x-httpd-php",lineNumbers:!0,indentUnit:4,tabSize:4,theme:"mariana"},i.saveCursorPosition=!!i.saveCursorPosition,i.jsFiles=i.jsFiles?i.jsFiles:["mode/php/php.js","addon/edit/matchbrackets.js","mode/xml/xml.js","mode/javascript/javascript.js","mode/css/css.js","mode/htmlmixed/htmlmixed.js","addon/selection/active-line.js"],i.cssFiles=i.cssFiles?i.cssFiles:["lib/codemirror.css","theme/mariana.css"],e.settings.codemirror=Object.assign({},i),e.settings.codemirror.saveCursorPosition&&e.selection.setContent('<span style="display: none;" class="CmCaReT">&#x0;</span>');var r=tinymce.majorVersion<5?[{text:"Ok",subtype:"primary",onclick:function(){document.querySelectorAll(".mce-container-body>iframe")[0].contentWindow.submit(),t.close()}},{text:"Cancel",onclick:"close"}]:[{type:"custom",text:"Ok",name:"codemirrorOk",primary:!0},{type:"cancel",text:"Cancel",name:"codemirrorCancel"}],n={title:"The source HTML code of the CodeMirror plugin",url:o+"/source.html",width:window.innerWidth-100,height:window.innerHeight-200,resizable:!0,maximizable:!0,fullScreen:e.settings.codemirror.fullscreen,saveCursorPosition:!0,buttons:r,size:"normal"};tinymce.majorVersion>=5&&(n.onAction=function(o,i){"codemirrorOk"===i.name&&(document.querySelectorAll(".tox-dialog__body-iframe iframe")[0].contentWindow.submit(),e.undoManager.add(),t.close())});var t=tinymce.majorVersion<5?e.windowManager.open(n):e.windowManager.openUrl(n);e.settings.codemirror.fullscreen&&t.fullscreen(!0)}tinymce.majorVersion<5?(e.addButton("codemirror",{title:"The source HTML code of the CodeMirror plugin",icon:"codesample",onclick:i}),e.addMenuItem("codemirror",{icon:"codesample",text:"The source HTML code of the CodeMirror plugin",context:"tools",onclick:i})):(e.ui.registry.addButton("codemirror",{icon:"sourcecode",title:"The source HTML code of the CodeMirror plugin",tooltip:"The source HTML code of the CodeMirror plugin",onAction:i}),e.ui.registry.addMenuItem("codemirror",{icon:"sourcecode",text:"The source HTML code of the CodeMirror plugin",onAction:i,context:"tools"}))});