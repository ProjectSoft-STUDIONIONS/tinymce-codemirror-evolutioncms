/**
 *
 * The source HTML code of the CodeMirror plugin
 *
 * plugin.js
 *
 * Copyright 2013 Web Power, www.webpower.nl
 * @author Arjan Haverkamp
 *
 * Copyright Â© 2008 - All right reserved
 * @update ProjectSoft <projectsoft2009@yandex.ru>
 * @date 14.02.2026
 *
 */
!function(doc,tiny){"use strict";tiny.PluginManager.requireLangPack("codemirror"),tiny.PluginManager.add("codemirror",function(editor,url){function e(){editor.focus(),editor.selection.collapse(!0);let e=editor.settings.codemirror?Object.assign({},editor.settings.codemirror):{};e.indentOnInit=!0,e.fullscreen=!!e.fullscreen,e.iframe=e.iframe?e.iframe:"source.html",e.path="codemirror",e.config=e.config?Object.assign(e.config,{mode:"application/x-httpd-php",lineNumbers:!0,indentUnit:4,tabSize:4,theme:"mariana"}):{mode:"application/x-httpd-php",lineNumbers:!0,indentUnit:4,tabSize:4,theme:"mariana"},e.saveCursorPosition=!!e.saveCursorPosition,e.jsFiles=e.jsFiles?e.jsFiles:["mode/php/php.js","addon/edit/matchbrackets.js","mode/xml/xml.js","mode/javascript/javascript.js","mode/css/css.js","mode/htmlmixed/htmlmixed.js","addon/selection/active-line.js"],e.cssFiles=e.cssFiles?e.cssFiles:["lib/codemirror.css","theme/mariana.css"],editor.settings.codemirror=Object.assign({},e),editor.settings.codemirror.saveCursorPosition&&editor.selection.setContent('<span style="display: none;" class="CmCaReT">&#x0;</span>');var o=tiny.majorVersion<5?[{text:"Ok",subtype:"primary",onclick:function(){doc.querySelectorAll(".mce-container-body>iframe")[0].contentWindow.submit(),i.close()}},{text:"Cancel",onclick:"close"}]:[{type:"custom",text:"Ok",name:"codemirrorOk",primary:!0},{type:"cancel",text:"Cancel",name:"codemirrorCancel"}],r={title:"The source HTML code of the CodeMirror plugin",url:url+"/"+editor.settings.codemirror.iframe,classes:"codemirror-dialog",width:window.innerWidth-100,height:window.innerHeight-200,resizable:!0,maximizable:!0,fullScreen:editor.settings.codemirror.fullscreen,saveCursorPosition:!0,buttons:o,size:"normal"};tiny.majorVersion>=5&&(r.onAction=function(e,o){"codemirrorOk"===o.name&&(doc.querySelectorAll(".tox-dialog__body-iframe iframe")[0].contentWindow.submit(),editor.undoManager.add(),i.close())});var i=tiny.majorVersion<5?editor.windowManager.open(r):editor.windowManager.openUrl(r);editor.settings.codemirror.fullscreen&&i.fullscreen(!0)}tiny.majorVersion<5?(editor.addButton("codemirror",{title:"The source HTML code of the CodeMirror plugin",image:tiny.baseURL+"/plugins/codemirror/codemirror.svg",onclick:e}),editor.addMenuItem("codemirror",{image:tiny.baseURL+"/plugins/codemirror/codemirror.svg",text:"The source HTML code of the CodeMirror plugin",context:"tools",onclick:e})):(editor.ui.registry.addButton("codemirror",{image:tiny.baseURL+"/plugins/codemirror/codemirror.svg",title:"The source HTML code of the CodeMirror plugin",tooltip:"The source HTML code of the CodeMirror plugin",onAction:e}),editor.ui.registry.addMenuItem("codemirror",{image:tiny.baseURL+"/plugins/codemirror/codemirror.svg",text:"The source HTML code of the CodeMirror plugin",onAction:e,context:"tools"}))})}(document,tinymce);