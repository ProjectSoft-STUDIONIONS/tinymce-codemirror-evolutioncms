tinymce.PluginManager.requireLangPack("codemirror"),tinymce.PluginManager.add("codemirror",function(e,o){function r(){e.focus(),e.selection.collapse(!0),e.settings.codemirror.saveCursorPosition&&e.selection.setContent('<span style="display: none;" class="CmCaReT">&#x0;</span>');var r=800;e.settings.codemirror.width&&(r=e.settings.codemirror.width);var i=550;e.settings.codemirror.height&&(i=e.settings.codemirror.height);var t=tinymce.majorVersion<5?[{text:"Ok",subtype:"primary",onclick:function(){document.querySelectorAll(".mce-container-body>iframe")[0].contentWindow.submit(),c.close()}},{text:"Cancel",onclick:"close"}]:[{type:"custom",text:"Ok",name:"codemirrorOk",primary:!0},{type:"cancel",text:"Cancel",name:"codemirrorCancel"}],n={title:"HTML source code",url:o+"/source.html",width:r,height:i,resizable:!0,maximizable:!0,fullScreen:e.settings.codemirror.fullscreen,saveCursorPosition:!1,buttons:t,size:"normal"};tinymce.majorVersion>=5&&(n.onAction=function(o,r){"codemirrorOk"===r.name&&(document.querySelectorAll(".tox-dialog__body-iframe iframe")[0].contentWindow.submit(),e.undoManager.add(),c.close())});var c=tinymce.majorVersion<5?e.windowManager.open(n):e.windowManager.openUrl(n);e.settings.codemirror.fullscreen&&c.fullscreen(!0)}tinymce.majorVersion<5?(e.addButton("codemirror",{title:"Source code Codemirror",icon:"code",onclick:r}),e.addMenuItem("codemirror",{icon:"code",text:"Source code Codemirror",context:"tools",onclick:r})):(e.ui.registry.addButton("codemirror",{icon:"sourcecode",title:"Source code Codemirror",tooltip:"Source code Codemirror",onAction:r}),e.ui.registry.addMenuItem("codemirror",{icon:"sourcecode",text:"Source code Codemirror",onAction:r,context:"tools"}))});